# A Dockerisable Version of SABIO

## contents

 
 - [`data/`](./data/): Data for SABIO, specifically, a subset of the NMVW collection and the OpenBeelde dataset by Beeld & Geluid. Pre-processed to be parseable by the SABIO backend and engines. For SABIO, each dataset consists of 3 files: a table of objects and their metadata, a table listing URLs for images and thumbnails and a JSON file which specifies for the SABIO engines how the fields in the main table are to be interpreted. 
 - [`src/`](./src/): The SABIO backend, including the Flask app in `app.py`, helper functionaolities in `datasets.py` and `results.py` and the SABIO engine definitions in `engines/`.
 - [`cache/`](./cache/): Pre-computed and cached versions of the SABIO engines. The Flask app checks automatically if engines are pre-computed (i.e. present in `./cache/`) and if not compute them on start-up and save them there. 
 
 - [`start.sh`](./start.sh): see [running](#running) below

 - [`requirements.txt`](./requirements.txt) - list of versioned Python packages used by the SABIO Flask app (file autogenerated by [pigar](https://github.com/damnever/pigar)); slight exception: gunicorn, the WSGI used to spawn Python backend Flask apps
 

## installation

Once the required Python packages are installed, this folder can be run as-is; specifically [`./src/app.py`](./src/app.py) which is the Flask app or [`./start.sh`](./start.sh) which uses gunicorn to run the Flask app.

## running

some notes:

 - running the SABIO backend Flask app has been tested with `gunicorn` as a load balancer and WSGI apps, see [`start.sh`](./start.sh) but it's not necessary to use `gunicorn`; the parameters used in [`start.sh`](./start.sh) are:  

 - imports in the Python scripts & modules are relative and paths to files in `./cache` and `./data` hard-coded. This implies that `./src/app.py` ca only be run from `./src`.

 - each spawned worker (e.g. by `gunicorn`) occupies the same amount of RAM, there is no sharing of resources (due to the Python GIL) 
 
 - 
 
    - 